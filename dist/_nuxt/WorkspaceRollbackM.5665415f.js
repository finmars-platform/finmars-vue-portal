import{_ as F}from"./Loader.41d82123.js";import{_ as M}from"./Checkbox.a095e9fa.js";import{a as N,r as w,L as R,o as c,c as W,w as r,k as n,u as s,h as o,f as _,y as $,i as L,t as l,l as Y,F as z,m as i,x as k,p as I,z as S,W as U}from"./entry.e001551d.js";import{u as A}from"./index.1f5ecefa.js";import{u as b}from"./useNotify.ee45f36b.js";import"./Icon.02350196.js";import"./Input.5f2d228f.js";import"./Menu.c4bdadcb.js";import"./TopRefresh.9a62cc06.js";import"./HorizontalPanel.b65b1a2f.js";import"./Card.b3aab90e.js";import"./Area.951d43e8.js";const H=["onClick"],j={class:"backup_title"},E={class:"flex aic sb"},P={key:0},T=i("Performed by: "),q={class:"backup_by"},G={class:"backup_notes"},J={key:1,class:"flex aic jcc"},K={class:"flex sb"},O=i("cancel"),Q=i("start"),X={__name:"WorkspaceRollbackM",props:{workspaceId:String},emits:["update:modelValue"],setup(f,{emit:y}){const v=f;let{data:x,refresh:Z,pending:g}=A("masterBackups",()=>k("masterBackups.get"),"$65eU4Fg4Dd"),u=w(!1),a=R({master_user_backup_id:null,create_backup_before_rollback:!0});async function V(){u.value=!0,(await k("masterRollback.put",{params:{id:v.workspaceId},body:a})).error?b({type:"error",title:"No success"}):b({type:"success",title:"Success"}),p()}function p(){y("update:modelValue",!1)}function h(d){return I(d).format("DD.MM.YYYY HH:mm")}return(d,t)=>{const B=F,C=M,m=S,D=U;return c(),W(D,{no_padding:"",title:"Rollback Workspace from Backup","onUpdate:modelValue":t[3]||(t[3]=e=>p())},{controls:r(()=>[n(C,{class:"p-b-8",modelValue:s(a).create_backup_before_rollback,"onUpdate:modelValue":t[0]||(t[0]=e=>s(a).create_backup_before_rollback=e),label:"Create backup before rollback"},null,8,["modelValue"]),o("div",K,[n(m,{type:"text",onClick:t[1]||(t[1]=e=>p())},{default:r(()=>[O]),_:1}),n(m,{disabled:!s(a).master_user_backup_id,processing:s(u),onClick:t[2]||(t[2]=e=>V())},{default:r(()=>[Q]),_:1},8,["disabled","processing"])])]),default:r(()=>[s(g)?(c(),_("div",J,[n(B)])):(c(!0),_(z,{key:0},$(s(x).results,e=>(c(),_("div",{class:L(["backup",{active:s(a).master_user_backup_id==e.id}]),key:e.id,onClick:ee=>s(a).master_user_backup_id=e.id},[o("div",j,l(e.name),1),o("div",E,[o("div",null,l(h(e.created_at)),1),e.created_by?(c(),_("div",P,[T,o("span",q,l(e.created_by),1)])):Y("",!0)]),o("div",G,l(e.notes),1)],10,H))),128))]),_:1})}}},ue=N(X,[["__scopeId","data-v-5f9aac94"]]);export{ue as default};
