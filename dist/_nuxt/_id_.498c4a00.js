import{_ as B}from"./Input.5f2d228f.js";import{_ as D}from"./Card.b3aab90e.js";import{_ as $}from"./DateExpr.5fb06429.js";import{_ as g}from"./Select.1492975e.js";import{_ as E}from"./Menu.c4bdadcb.js";import{a as O,r,o as n,f,k as o,w as i,h as x,t as w,u as l,F as k,y as A,i as J,b as L,a1 as T,v as z,c as F,l as V,x as U}from"./entry.e001551d.js";import{_ as G}from"./Area.951d43e8.js";import{_ as M}from"./SettingsLayout.728c6754.js";import{u as R}from"./useNotify.ee45f36b.js";import"./Icon.02350196.js";const q={class:"wrap"},H={class:"flex aic",style:{height:"42px"}},K={class:"fm_avatar"},Q={class:"fm_list"},W=["onClick"],X={class:"fm_avatar m-l-10"},Y={__name:"SelectDouble",props:["items","simpleItems","label","type","modelValue","prop_id"],emits:["update:type","update:modelValue"],setup(m,{emit:v}){const p=m;let e=p.items.find(s=>s.id==p.type);e.is_active=!0;let b=r(e.icon);function y(s){p.items.forEach(u=>{u.is_active=!1}),s.is_active=!0,b.value=s.icon,v("update:type",s.id)}return(s,u)=>{const S=g,_=E;return n(),f("div",q,[o(S,{items:m.simpleItems,label:m.label,prop_id:m.prop_id,modelValue:m.modelValue,"onUpdate:modelValue":u[0]||(u[0]=t=>v("update:modelValue",t))},null,8,["items","label","prop_id","modelValue"]),o(_,{class:"select_btn"},{btn:i(()=>[x("div",H,[x("div",K,w(l(b)),1)])]),default:i(({close:t})=>[x("div",Q,[(n(!0),f(k,null,A(m.items,(d,c)=>(n(),f("div",{class:J(["fm_list_item flex sb",{active:d.is_active}]),key:c,onClick:I=>(y(d),t())},[x("div",null,w(d.name),1),x("div",X,w(d.icon),1)],10,W))),128))])]),_:1})])}}},Z=O(Y,[["__scopeId","data-v-aa6c0f7c"]]),ue={__name:"[id]",setup(m){const v=L();let p=T(),e=r({}),b=r([]);r(),r();let y=r(),s=r([{id:"simple_import",name:"Simple Import",icon:"SI"},{id:"transaction_import",name:"Transaction Import",icon:"TI"}]);async function u(){let _=await U("importBankProcId.get",{params:{id:p.params.id}});e.value=_,e.value.data||(e.value.data={}),y.value=(await U("importSchemeLight.get")).results,y.value.forEach(t=>{t.title=t.name,t.value=t.name}),b.value=await U("dataProvider.get")}async function S(){await U("importBankProcId.put",{body:e.value,params:{id:p.params.id}})&&R({type:"success",title:"Saved!"})}return v.current.base_api_url?u():z(()=>v.current,async()=>{u()}),(_,t)=>{const d=B,c=D,I=$,C=g,N=Z,P=G,j=M;return l(e).id?(n(),F(j,{key:0,title:"Update Data Procedure",onSave:t[23]||(t[23]=a=>S()),onCancel:t[24]||(t[24]=()=>_.$router.push("/import/bank"))},{left:i(()=>[o(c,{title:"Global",class:"mb-x"},{default:i(()=>[o(d,{label:"Name",modelValue:l(e).name,"onUpdate:modelValue":t[0]||(t[0]=a=>l(e).name=a)},null,8,["modelValue"]),o(d,{label:"User code",modelValue:l(e).user_code,"onUpdate:modelValue":t[1]||(t[1]=a=>l(e).user_code=a)},null,8,["modelValue"]),o(d,{label:"Notes",modelValue:l(e).notes,"onUpdate:modelValue":t[2]||(t[2]=a=>l(e).notes=a)},null,8,["modelValue"]),o(d,{label:"Notes for user",modelValue:l(e).notes_for_users,"onUpdate:modelValue":t[3]||(t[3]=a=>l(e).notes_for_users=a)},null,8,["modelValue"])]),_:1}),o(c,{title:"Period",class:"mb-x"},{default:i(()=>[o(I,{label:"Date from",expr:l(e).date_from_expr,"onUpdate:expr":t[4]||(t[4]=a=>l(e).date_from_expr=a),date:l(e).date_from,"onUpdate:date":t[5]||(t[5]=a=>l(e).date_from=a)},null,8,["expr","date"]),o(I,{label:"Date to",expr:l(e).date_to_expr,"onUpdate:expr":t[6]||(t[6]=a=>l(e).date_to_expr=a),date:l(e).date_to,"onUpdate:date":t[7]||(t[7]=a=>l(e).date_to=a)},null,8,["expr","date"])]),_:1})]),right:i(()=>[o(c,{title:"Provider and schemes",class:"mb-x"},{default:i(()=>[o(C,{modelValue:l(e).provider,"onUpdate:modelValue":t[8]||(t[8]=a=>l(e).provider=a),items:l(b),label:"Provider"},null,8,["modelValue","items"]),o(N,{label:"Scheme name",modelValue:l(e).scheme_user_code,"onUpdate:modelValue":t[9]||(t[9]=a=>l(e).scheme_user_code=a),type:l(e).scheme_type,"onUpdate:type":t[10]||(t[10]=a=>l(e).scheme_type=a),items:l(s),simpleItems:l(y),prop_id:"user_code"},null,8,["modelValue","type","items","simpleItems"]),l(e).provider==1?(n(),F(d,{key:0,label:"Filename pattern",modelValue:l(e).data.filenamemask,"onUpdate:modelValue":t[11]||(t[11]=a=>l(e).data.filenamemask=a)},null,8,["modelValue"])):V("",!0),l(e).provider==3?(n(),F(d,{key:1,label:"Archive password",modelValue:l(e).data.archivepassword,"onUpdate:modelValue":t[12]||(t[12]=a=>l(e).data.archivepassword=a)},null,8,["modelValue"])):V("",!0),l(e).provider==4?(n(),f(k,{key:2},[o(d,{label:"Code",modelValue:l(e).data.code,"onUpdate:modelValue":t[13]||(t[13]=a=>l(e).data.code=a)},null,8,["modelValue"]),o(d,{label:"Issuer",modelValue:l(e).data.issuer,"onUpdate:modelValue":t[14]||(t[14]=a=>l(e).data.issuer=a)},null,8,["modelValue"]),o(d,{label:"Client id",modelValue:l(e).data.client_id,"onUpdate:modelValue":t[15]||(t[15]=a=>l(e).data.client_id=a)},null,8,["modelValue"]),o(d,{label:"jwt",modelValue:l(e).data.jwt,"onUpdate:modelValue":t[16]||(t[16]=a=>l(e).data.jwt=a)},null,8,["modelValue"])],64)):V("",!0),l(e).provider==5?(n(),f(k,{key:3},[o(d,{label:"Sender pattern",modelValue:l(e).data.sender,"onUpdate:modelValue":t[17]||(t[17]=a=>l(e).data.sender=a)},null,8,["modelValue"]),o(d,{label:"Subject pattern",modelValue:l(e).data.subject,"onUpdate:modelValue":t[18]||(t[18]=a=>l(e).data.subject=a)},null,8,["modelValue"]),o(d,{label:"Filename pattern",modelValue:l(e).data.filename,"onUpdate:modelValue":t[19]||(t[19]=a=>l(e).data.filename=a)},null,8,["modelValue"])],64)):V("",!0),l(e).provider==6?(n(),f(k,{key:4},[o(d,{label:"Url",modelValue:l(e).data.url,"onUpdate:modelValue":t[20]||(t[20]=a=>l(e).data.url=a)},null,8,["modelValue"]),o(d,{label:"Security token",modelValue:l(e).data.security_token,"onUpdate:modelValue":t[21]||(t[21]=a=>l(e).data.security_token=a)},null,8,["modelValue"]),o(P,{label:"JSON",modelValue:JSON.stringify(l(e).data,null,2),"onUpdate:modelValue":t[22]||(t[22]=a=>l(e).data=JSON.parse(a))},null,8,["modelValue"])],64)):V("",!0)]),_:1})]),_:1})):V("",!0)}}};export{ue as default};
