import{_ as L}from"./Input.5f2d228f.js";import{_ as R}from"./Card.b3aab90e.js";import{_ as j}from"./DateExpr.5fb06429.js";import{_ as B}from"./Checkbox.a095e9fa.js";import{_ as D}from"./MultiSelect.a3f6a189.js";import{_ as G}from"./Select.1492975e.js";import{_ as O}from"./SettingsLayout.728c6754.js";import{a as A,b as E,a1 as T,r,v as M,u as t,o as X,c as $,w as n,k as i,h as q,j as F,l as z,x as s}from"./entry.e001551d.js";import{u as H}from"./useNotify.ee45f36b.js";import"./Icon.02350196.js";import"./Menu.c4bdadcb.js";const J={class:"checks"},K={__name:"[id]",setup(Q){const f=E();let V=T(),l=r({}),v=r([]),g=r([]),x=r([]),y=r([]),b=r([]),N=r(!1),S=r(!1);r(""),r(!1),r(!1);let U=r([{name:"Run valuation: Always",id:"2"},{name:"Run valuation: Open Position",id:"3"}]),a=r(),u=r();async function w(){s("instrumentType.get").then(e=>x.value=e.results),s("instrumentScheme.get").then(e=>y.value=e.results),s("policyFilters.get").then(e=>v.value=e.results),s("portfolioFilters.get").then(e=>g.value=e.results),s("currencyScheme.get").then(e=>b.value=e.results);let c=await s("pricingProcId.get",{params:{id:V.params.id}});l.value=c,a.value=l.value.instrument_pricing_condition_filters.split(","),u.value=l.value.currency_pricing_condition_filters.split(","),N.value=!!l.value.price_date_from_expr,S.value=!!l.value.price_date_to_expr}async function I(){l.value.currency_pricing_condition_filters=u.value.join(","),l.value.instrument_pricing_condition_filters=a.value.join(","),await s("pricingProcId.put",{body:l.value,params:{id:V.params.id}})&&H({type:"success",title:"Saved!"})}return f.current.base_api_url?w():M(()=>f.current,async()=>{w()}),(c,e)=>{const m=L,d=R,P=j,p=B,_=D,C=G,k=O;return t(l).id?(X(),$(k,{key:0,title:"Update Pricing Procedure",onSave:e[24]||(e[24]=o=>I()),onCancel:e[25]||(e[25]=()=>c.$router.push("/valuations/run-pricing"))},{left:n(()=>[i(d,{title:"Global",class:"mb-x"},{default:n(()=>[i(m,{label:"Name",modelValue:t(l).name,"onUpdate:modelValue":e[0]||(e[0]=o=>t(l).name=o)},null,8,["modelValue"]),i(m,{label:"User code",modelValue:t(l).user_code,"onUpdate:modelValue":e[1]||(e[1]=o=>t(l).user_code=o)},null,8,["modelValue"]),i(m,{label:"Notes",modelValue:t(l).notes,"onUpdate:modelValue":e[2]||(e[2]=o=>t(l).notes=o)},null,8,["modelValue"]),i(m,{label:"Notes for user",modelValue:t(l).notes_for_users,"onUpdate:modelValue":e[3]||(e[3]=o=>t(l).notes_for_users=o)},null,8,["modelValue"])]),_:1}),i(d,{title:"Prices",class:"mb-x"},{default:n(()=>[i(P,{label:"Date from",expr:t(l).price_date_from_expr,"onUpdate:expr":e[4]||(e[4]=o=>t(l).price_date_from_expr=o),date:t(l).price_date_from,"onUpdate:date":e[5]||(e[5]=o=>t(l).price_date_from=o)},null,8,["expr","date"]),i(P,{label:"Date to",expr:t(l).price_date_to_expr,"onUpdate:expr":e[6]||(e[6]=o=>t(l).price_date_to_expr=o),date:t(l).price_date_to,"onUpdate:date":e[7]||(e[7]=o=>t(l).price_date_to=o)},null,8,["expr","date"]),i(m,{label:"Roll prices for N days forward",modelValue:t(l).price_fill_days,"onUpdate:modelValue":e[8]||(e[8]=o=>t(l).price_fill_days=o)},null,8,["modelValue"]),q("div",J,[i(p,{modelValue:t(l).price_get_principal_prices,"onUpdate:modelValue":e[9]||(e[9]=o=>t(l).price_get_principal_prices=o),label:"Get Principal Prices"},null,8,["modelValue"]),i(p,{modelValue:t(l).price_get_accrued_prices,"onUpdate:modelValue":e[10]||(e[10]=o=>t(l).price_get_accrued_prices=o),label:"Get Accruals"},null,8,["modelValue"]),i(p,{modelValue:t(l).price_get_fx_rates,"onUpdate:modelValue":e[11]||(e[11]=o=>t(l).price_get_fx_rates=o),label:"Get FX Rates"},null,8,["modelValue"]),i(p,{modelValue:t(l).price_overwrite_principal_prices,"onUpdate:modelValue":e[12]||(e[12]=o=>t(l).price_overwrite_principal_prices=o),label:"Overwrite "},null,8,["modelValue"]),i(p,{modelValue:t(l).price_overwrite_accrued_prices,"onUpdate:modelValue":e[13]||(e[13]=o=>t(l).price_overwrite_accrued_prices=o),label:"Overwrite"},null,8,["modelValue"]),i(p,{modelValue:t(l).price_overwrite_fx_rates,"onUpdate:modelValue":e[14]||(e[14]=o=>t(l).price_overwrite_fx_rates=o),label:"Overwrite"},null,8,["modelValue"])])]),_:1})]),right:n(()=>[i(d,{title:"Filters",class:"mb-x"},{default:n(()=>[i(_,{modelValue:t(l).pricing_policy_filters,"onUpdate:modelValue":e[15]||(e[15]=o=>t(l).pricing_policy_filters=o),title:"Pricing policies",items:t(v)},null,8,["modelValue","items"]),i(_,{modelValue:t(l).portfolio_filters,"onUpdate:modelValue":e[16]||(e[16]=o=>t(l).portfolio_filters=o),title:"Portfolios",items:t(g)},null,8,["modelValue","items"])]),_:1}),i(d,{title:"Instruments",class:"mb-x"},{default:n(()=>[i(_,{modelValue:t(l).instrument_type_filters,"onUpdate:modelValue":e[17]||(e[17]=o=>t(l).instrument_type_filters=o),title:"Instrument types",items:t(x)},null,8,["modelValue","items"]),i(_,{modelValue:t(l).instrument_pricing_scheme_filters,"onUpdate:modelValue":e[18]||(e[18]=o=>t(l).instrument_pricing_scheme_filters=o),title:"Pricing schemes",items:t(y)},null,8,["modelValue","items"]),i(C,{multiple:"",modelValue:t(a),"onUpdate:modelValue":[e[19]||(e[19]=o=>F(a)?a.value=o:a=o),e[20]||(e[20]=o=>t(l).instrument_pricing_condition_filters=o.join(","))],items:t(U),label:"Pricing Condition"},null,8,["modelValue","items"])]),_:1}),i(d,{title:"Currencies",class:"mb-x"},{default:n(()=>[i(_,{modelValue:t(l).currency_pricing_scheme_filters,"onUpdate:modelValue":e[21]||(e[21]=o=>t(l).currency_pricing_scheme_filters=o),title:"Pricing schemes",items:t(b)},null,8,["modelValue","items"]),i(C,{label:"Pricing Condition",modelValue:t(u),"onUpdate:modelValue":[e[22]||(e[22]=o=>F(u)?u.value=o:u=o),e[23]||(e[23]=o=>t(l).currency_pricing_condition_filters=o.join(","))],items:t(U)},null,8,["modelValue","items"])]),_:1})]),_:1})):z("",!0)}}},se=A(K,[["__scopeId","data-v-40f325e6"]]);export{se as default};
