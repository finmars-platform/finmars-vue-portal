import{_ as D}from"./TopRefresh.9a62cc06.js";import{a as j,b as N,r as v,e as p,o as u,f as b,h as e,t as c,i as T,u as h,j as E,k as n,w as d,l as q,T as B,m as x,p as O,q as P,s as V,I as Y,v as A,F as I,y as C,a3 as F,x as k,c as M}from"./entry.e001551d.js";import{u as R}from"./useNotify.ee45f36b.js";import"./HorizontalPanel.b65b1a2f.js";const S=t=>(P("data-v-dcc6dcfd"),t=t(),V(),t),J={class:""},L={class:"table-cell"},U={class:"table-cell"},z={class:"table-cell"},G={key:0},H={class:"sub_procedure"},K={class:"sp_item d-flex"},Q=S(()=>e("b",{class:"sp_item_h"},"Procedure",-1)),W={class:"sp_item d-flex"},X=S(()=>e("b",{class:"sp_item_h"},"Provider",-1)),Z={class:"sp_item d-flex"},ee=S(()=>e("b",{class:"sp_item_h"},"Status",-1)),te={class:"center"},se=x(" Show request "),ae=x(" Procedure request "),oe=x("cancel"),le=x("copy"),ne=x("ok"),ce={__name:"ItemEvent",props:["item"],setup(t){N(),v(null);let i=v(!1);v(!1);const m={P:"Processing",D:"Done",I:"Init",E:"Error"};function y(_){navigator.clipboard.writeText(_),R({type:"success",title:"Copied successfully"})}function $(_){return O(_).format("DD.MM.YYYY LT")}return(_,a)=>{const w=p("v-card-title"),l=p("v-card-text"),s=p("v-btn"),r=p("v-card-actions"),g=p("v-card"),o=p("v-dialog");return u(),b("div",J,[e("div",{class:T(["table-row",{active:h(i)}]),onClick:a[0]||(a[0]=f=>E(i)?i.value=!h(i):i=!h(i))},[e("div",L,c(t.item.procedure_object.name.length>30?t.item.procedure_object.name.slice(0,25)+"...":t.item.procedure_object.name),1),e("div",U,c($(t.item.created)),1),e("div",z,c(m[t.item.status]),1)],2),n(B,null,{default:d(()=>[h(i)?(u(),b("div",G,[e("div",H,[e("div",K,[Q,e("div",null,c(t.item.procedure_object.name),1)]),e("div",W,[X,e("div",null,c(t.item.procedure_object.provider_object.name),1)]),e("div",Z,[ee,e("div",null,c(m[t.item.status]),1)]),e("div",te,[n(s,{color:"primary",variant:"text"},{default:d(()=>[se,n(o,{activator:"parent",modelValue:t.item.dialog,"onUpdate:modelValue":a[4]||(a[4]=f=>t.item.dialog=f)},{default:d(()=>[n(g,null,{default:d(()=>[n(w,null,{default:d(()=>[ae]),_:1}),n(l,null,{default:d(()=>[e("pre",null,c(JSON.stringify(t.item.request_data,null,2)),1)]),_:1}),n(r,{class:"space-between"},{default:d(()=>[n(s,{color:"primary",onClick:a[1]||(a[1]=f=>t.item.dialog=!1)},{default:d(()=>[oe]),_:1}),e("div",null,[n(s,{color:"primary",variant:"text",onClick:a[2]||(a[2]=f=>y(JSON.stringify(t.item.request_data,null,2)))},{default:d(()=>[le]),_:1}),n(s,{color:"primary",variant:"contained",onClick:a[3]||(a[3]=f=>t.item.dialog=!1)},{default:d(()=>[ne]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])])])):q("",!0)]),_:1})])}}},ie=j(ce,[["__scopeId","data-v-dcc6dcfd"]]);const de=t=>(P("data-v-6bf3e851"),t=t(),V(),t),re={class:"flex aic"},_e={class:"py-6 px-7"},ue={class:"table"},ve=F('<div class="table-row header" data-v-6bf3e851><div class="table-cell" data-v-6bf3e851>Name</div><div class="table-cell" data-v-6bf3e851>Role</div><div class="table-cell" data-v-6bf3e851>Status</div><div class="table-cell" data-v-6bf3e851>Groups</div></div>',1),me=["item","onClick"],fe={class:"table-cell"},pe={class:"table-cell"},be={class:"table-cell"},he={class:"table-cell"},ge={class:"table"},xe=de(()=>e("div",{class:"table-row header"},[e("div",{class:"table-cell"},"Procedure"),e("div",{class:"table-cell"},"Date"),e("div",{class:"table-cell"},"Status")],-1)),ye={__name:"index",setup(t){const i=N();let m=v(null),y=v(null),$=Y(()=>{let l={};return m.value?(m.value.forEach(s=>{let r=[];s.is_admin&&r.push("Admin"),s.is_owner&&r.push("Owner"),!s.is_owner&&!s.is_admin&&r.push("User"),l[s.username]={id:s.id,username:s.username,role:r.join(", "),status:s.is_owner?"Creator":"Accepted",groups:s.groups_object.map(g=>g.name).join(", ")}}),console.log("data:",l),l):[]}),_=v(null);v(!1);async function a(){let l=await k("members.get");m.value=l.results,l=await k("memberInvites.get"),y.value=l.results;let s=await k("dataInstance.get");_.value=s.results}function w(){}return i.current.base_api_url?a():A(()=>i.current,async()=>{a()}),(l,s)=>{const r=D,g=ie;return u(),b("div",null,[n(r,{refresh:w}),e("div",re,[e("div",_e,[e("div",ue,[ve,(u(!0),b(I,null,C(h($),o=>(u(),b("div",{class:"table-row",key:o.id,item:o,onClick:f=>l.$router.push(`/settings/permissions/members/${o.id}`)},[e("div",fe,c(o.username),1),e("div",pe,c(o.role),1),e("div",be,c(o.status),1),e("div",he,c(o.groups),1)],8,me))),128))])]),e("div",ge,[xe,(u(!0),b(I,null,C(h(_),o=>(u(),M(g,{key:o.id,item:o},null,8,["item"]))),128))])])])}}},Ie=j(ye,[["__scopeId","data-v-6bf3e851"]]);export{Ie as default};
