import{_ as Re}from"./Date.1e44e27d.js";import{a as W,o as b,f as V,h as d,t as U,u as o,B as ie,r as h,I as me,v as ve,c as te,w as y,k as l,m as ne,x as D,z as be,W as he,L as we,j as Y,F as R,y as q,i as ee,q as Ve,s as $e,A as ge,l as Ue,E as Ne,G as Je,$ as Ee,b as je,p as k,a0 as ze}from"./entry.e001551d.js";import{_ as Se}from"./Select.1492975e.js";import{_ as qe}from"./MultiSelect.a3f6a189.js";import{_ as We}from"./Checkbox.a095e9fa.js";import{_ as Oe}from"./Loader.41d82123.js";import{_ as Q}from"./Icon.02350196.js";import{_ as ke}from"./HorizontalPanel.b65b1a2f.js";import{_ as Ce}from"./Menu.c4bdadcb.js";import{_ as fe}from"./Input.5f2d228f.js";import{u as _e}from"./useNotify.ee45f36b.js";const He={class:"rs_row flex-row fc-space-between fi-center"},Ge={class:"rs_field_label"},Qe={class:"rs_field_holder"},Ke={__name:"Row",props:{label:String},setup(e){const r=e;return(t,a)=>(b(),V("div",He,[d("div",Ge,U(o(r).label),1),d("div",Qe,[ie(t.$slots,"default",{},void 0,!0)])]))}},Xe=W(Ke,[["__scopeId","data-v-70508898"]]),Ze={class:"rs_block_h"},et={class:"rs_block_content flex-column"},tt={__name:"Block",props:{title:String},setup(e){const r=e;return(t,a)=>(b(),V("div",null,[d("h5",Ze,U(o(r).title),1),d("div",et,[ie(t.$slots,"default",{},void 0,!0)])]))}},nt=W(tt,[["__scopeId","data-v-51c1b34e"]]),ot={key:0,class:"rs_mc_wrap"},at={key:1,class:"flex-row fc-center"},lt={class:"flex-row fc-space-between"},st=ne("CANCEL"),rt=ne("SAVE"),it={__name:"DialogSettings",props:{openDialog:Boolean,layoutReadyStatus:Boolean,viewerData:Object,bundles:Object},emits:["cancel","save"],setup(e,{emit:r}){const t=e;let a=h([]),i=h([]),u=[{id:"time_weighted",name:"Time-Weighted Return"},{id:"money_weighted",name:"Money Weighted Return"}],$=[{id:"days",name:"Day"},{id:"months",name:"Month"}],O=me(()=>a.value&&t.layoutReadyStatus&&i.value);C();let g=h({...t.viewerData.reportOptions});ve(()=>t.viewerData.reportOptions,()=>{g.value={...t.viewerData.reportOptions}});let M=h({...t.viewerData.components});ve(()=>t.viewerData.components,()=>{M.value={...t.viewerData.components}});async function x(){const _=await D("pricingPoliciesLight.get");_.error||(i.value=_.results)}async function F(){const _=await D("currenciesLight.get");_.error||(a.value=_.results)}function v(){r("cancel")}function w(){r("save",[g.value,M.value])}function C(){x(),F()}return(_,f)=>{const K=Re,T=Xe,P=Se,I=nt,X=qe,J=We,E=Oe,oe=be,de=he;return b(),te(de,{title:"Settings"},{controls:y(()=>[d("div",lt,[l(oe,{type:"basic",onClick:f[9]||(f[9]=S=>v())},{default:y(()=>[st]),_:1}),l(oe,{onClick:f[10]||(f[10]=S=>w())},{default:y(()=>[rt]),_:1})])]),default:y(()=>[o(O)?(b(),V("div",ot,[l(I,{title:"General"},{default:y(()=>[l(T,{label:"Date to"},{default:y(()=>[l(K,{modelValue:o(g).end_date,"onUpdate:modelValue":f[0]||(f[0]=S=>o(g).end_date=S)},null,8,["modelValue"])]),_:1}),l(T,{label:"Reporting currency"},{default:y(()=>[l(P,{modelValue:o(g).report_currency,"onUpdate:modelValue":f[1]||(f[1]=S=>o(g).report_currency=S),items:o(a)},null,8,["modelValue","items"])]),_:1}),l(T,{label:"Pricing policy"},{default:y(()=>[l(P,{modelValue:o(g).pricing_policy,"onUpdate:modelValue":f[2]||(f[2]=S=>o(g).pricing_policy=S),items:o(i)},null,8,["modelValue","items"])]),_:1}),l(T,{label:"Return calculations"},{default:y(()=>[l(P,{modelValue:o(g).calculation_type,"onUpdate:modelValue":f[3]||(f[3]=S=>o(g).calculation_type=S),items:o(u)},null,8,["modelValue","items"])]),_:1}),l(T,{label:"Time grain"},{default:y(()=>[l(P,{modelValue:o(g).segmentation_type,"onUpdate:modelValue":f[4]||(f[4]=S=>o(g).segmentation_type=S),items:o($)},null,8,["modelValue","items"])]),_:1})]),_:1}),l(I,{title:"Filters"},{default:y(()=>[l(T,{label:"Portfolios and Bundles"},{default:y(()=>[l(X,{modelValue:o(g).bundles,"onUpdate:modelValue":f[5]||(f[5]=S=>o(g).bundles=S),title:"Portfolios and Bundles",items:e.bundles,item_id:"id"},null,8,["modelValue","items"])]),_:1})]),_:1}),l(I,{title:"Sections"},{default:y(()=>[l(J,{class:"m-b-20",modelValue:o(M).period,"onUpdate:modelValue":f[6]||(f[6]=S=>o(M).period=S),label:"Period returns"},null,8,["modelValue"]),l(J,{class:"m-b-20",modelValue:o(M).detail,"onUpdate:modelValue":f[7]||(f[7]=S=>o(M).detail=S),label:"Monthly returns"},null,8,["modelValue"]),l(J,{modelValue:o(M).diagram,"onUpdate:modelValue":f[8]||(f[8]=S=>o(M).diagram=S),label:"Graphs",class:"m-b-20"},null,8,["modelValue"])]),_:1})])):(b(),V("div",at,[l(E)]))]),_:1})}}},ut={__name:"BaseTopPanel",emits:["saveListLayout","openSettings"],setup(e){return(r,t)=>{const a=Q,i=ke;return b(),te(i,null,{leftActions:y(()=>[l(a,{icon:"save",btn:"",onClick:t[0]||(t[0]=u=>r.$emit("saveListLayout"))})]),rightActions:y(()=>[ie(r.$slots,"rightActions"),l(a,{icon:"settings",btn:"",onClick:t[1]||(t[1]=u=>r.$emit("openSettings"))})]),_:3})}}},dt={__name:"Text",props:{modelValue:String,label:String},setup(e){return(r,t)=>{const a=Q,i=fe;return b(),te(i,{label:e.label,modelValue:e.modelValue,"onUpdate:modelValue":t[0]||(t[0]=u=>r.$emit("update:modelValue",u))},{button:y(()=>[l(a,{icon:"edit"})]),_:1},8,["label","modelValue"])}}},ct={class:"e_names_popup"},pt={__name:"EntityNames",props:{label:String,name:String,short_name:String,user_code:String,public_name:String},emits:["update:name","update:short_name","update:user_code","update:public_name"],setup(e,{emit:r}){return(t,a)=>{const i=Q,u=dt,$=Ce,O=fe;return b(),te(O,{type:"text",label:e.label,modelValue:e.name,"onUpdate:modelValue":a[4]||(a[4]=g=>t.$emit("update:name",g))},{button:y(()=>[l($,null,{btn:y(()=>[l(i,{icon:"new_label"})]),default:y(()=>[d("div",ct,[d("div",null,[l(u,{label:"Full name",modelValue:e.name,"onUpdate:modelValue":a[0]||(a[0]=g=>t.$emit("update:name",g))},null,8,["modelValue"])]),d("div",null,[l(u,{label:"Short name",modelValue:e.short_name,"onUpdate:modelValue":a[1]||(a[1]=g=>t.$emit("update:short_name",g))},null,8,["modelValue"])]),d("div",null,[l(u,{label:"User code",modelValue:e.user_code,"onUpdate:modelValue":a[2]||(a[2]=g=>t.$emit("update:user_code",g))},null,8,["modelValue"])]),d("div",null,[l(u,{class:"m-b-0",label:"Public name",modelValue:e.public_name,"onUpdate:modelValue":a[3]||(a[3]=g=>t.$emit("update:public_name",g))},null,8,["modelValue"])])])]),_:1})]),_:1},8,["label","modelValue"])}}},mt=W(pt,[["__scopeId","data-v-25ce2186"]]),De=e=>(Ve("data-v-bb0f645b"),e=e(),$e(),e),_t={class:"flex sp aic"},ft={class:"available"},yt=De(()=>d("div",{class:"header"},"Available",-1)),vt={class:"block"},gt={class:"search"},bt={class:"list"},ht=["onClick"],wt={class:"actions"},Vt={class:"selected"},$t=De(()=>d("div",{class:"header"},"Selected",-1)),St={class:"block"},Ot={class:"search"},kt={class:"list"},Ct=["onClick"],Dt={__name:"SelectWindow",props:{items:Array,modelValue:[String,Array],item_title:{type:String,default:"user_code"}},emits:["update:modelValue"],setup(e,{emit:r}){const t=e;h(!1);let a=h(""),i=h(""),u=t.modelValue;typeof u=="string"&&(u=u.split(","));let $=we(new Set(u)),O=me(()=>t.items.length?t.items.filter(F=>{let v=F[t.item_title];return $.has(v)&&v.toLocaleLowerCase().includes(i.value.toLocaleLowerCase())}):[]),g=me(()=>t.items.length?t.items.filter(F=>{let v=F[t.item_title];return!$.has(v)&&v.toLocaleLowerCase().includes(a.value.toLocaleLowerCase())}):[]);function M(F){g.value.filter(w=>w.selected||!!F).map(w=>(w.selected=!1,w[t.item_title])).forEach(w=>$.add(w)),console.log("selectedFilter:",O),r("update:modelValue",[...O.value].map(w=>w.id))}function x(F){O.value.filter(w=>w.selected||!!F).map(w=>(w.selected=!1,w[t.item_title])).forEach(w=>$.delete(w)),r("update:modelValue",[...O.value].map(w=>w.id))}return(F,v)=>{const w=fe,C=Q;return b(),V("div",_t,[d("div",ft,[yt,d("div",vt,[d("div",gt,[l(w,{class:"m-b-0",label:"Search",modelValue:o(a),"onUpdate:modelValue":v[0]||(v[0]=_=>Y(a)?a.value=_:a=_)},null,8,["modelValue"])]),d("div",bt,[(b(!0),V(R,null,q(o(g),_=>(b(),V("div",{class:ee(["list_item",{selected:_.selected}]),key:_.name,onClick:f=>_.selected=!_.selected},U(_[e.item_title]),11,ht))),128))])])]),d("div",wt,[l(C,{btn:"",icon:"chevron_right",onClick:v[1]||(v[1]=_=>M())}),l(C,{btn:"",icon:"keyboard_double_arrow_right",onClick:v[2]||(v[2]=_=>M("all"))}),l(C,{btn:"",icon:"chevron_left",onClick:v[3]||(v[3]=_=>x())}),l(C,{btn:"",icon:"keyboard_double_arrow_left",onClick:v[4]||(v[4]=_=>x("all"))})]),d("div",Vt,[$t,d("div",St,[d("div",Ot,[l(w,{class:"m-b-0",label:"Search",modelValue:o(i),"onUpdate:modelValue":v[5]||(v[5]=_=>Y(i)?i.value=_:i=_)},null,8,["modelValue"])]),d("div",kt,[(b(!0),V(R,null,q(o(O),_=>(b(),V("div",{class:ee(["list_item",{selected:_.selected}]),key:_.name,onClick:f=>_.selected=!_.selected},U(_[e.item_title]),11,Ct))),128))])])])])}}},Mt=W(Dt,[["__scopeId","data-v-bb0f645b"]]),Lt={class:"table"},Yt=["onClick"],xt={key:0,class:"center p-16"},Ft={__name:"Table",props:{headers:{type:Array},items:{type:Array},colls:{type:String},cb:{type:Function},status:{type:String},active:{type:Number}},setup(e){return(r,t)=>{const a=Oe;return b(),V(R,null,[d("div",Lt,[d("div",{class:"table-row t_header",style:ge({gridTemplateColumns:e.colls})},[(b(!0),V(R,null,q(e.headers,(i,u)=>(b(),V("div",{class:"table-cell font-weight-bold",key:u},U(i),1))),128))],4),(b(!0),V(R,null,q(e.items,(i,u)=>(b(),V("div",{class:ee(["table-row",{active:e.active==u,choosible:e.active!==void 0}]),style:ge({gridTemplateColumns:e.colls}),key:u,onClick:()=>{e.cb&&e.cb(u)}},[(b(!0),V(R,null,q(i,($,O)=>(b(),V("div",{class:ee(["table-cell",{disabled:$===""}]),key:O},[$===null?(b(),te(a,{key:0})):(b(),V(R,{key:1},[ne(U($),1)],64))],2))),128))],14,Yt))),128))]),e.items.length?Ue("",!0):(b(),V("div",xt,[l(a)]))],64)}}},Tt=W(Ft,[["__scopeId","data-v-70b865fd"]]),It={class:"fm_expansion_panel"},Bt={class:"fm_expansion_panel_content"},Pt={__name:"ExpansionPanel",props:{title:String},setup(e){let r=h(!0);return(t,a)=>{const i=Q;return b(),V("div",It,[d("div",{class:ee(["fm_expansion_panel_title",{active:o(r)}]),onClick:a[0]||(a[0]=u=>Y(r)?r.value=!o(r):r=!o(r))},[d("div",null,U(e.title),1),l(i,{icon:o(r)?"expand_less":"expand_more"},null,8,["icon"])],2),Ne(d("div",Bt,[ie(t.$slots,"default",{},void 0,!0)],512),[[Je,o(r)]])])}}},At=W(Pt,[["__scopeId","data-v-cf686502"]]),re=(e,r)=>{let t,a;if(typeof e!="object"||!e)return e;if(Object.prototype.toString.apply(e)==="[object Array]"){for(t=[],a=0;a<e.length;a+=1)t[a]=re(e[a]);return t}else if(r&&{}.toString.call(e)==="[object Function")return e;t={};for(a in e)e.hasOwnProperty(a)&&(t[a]=re(e[a]));return t},Rt=()=>we({listLayout:{},reportOptions:{},additions:{},components:{},exportOptions:{},contentType:"reports.performancereport",entityType:"reports-performance",isReport:!0,newLayout:!1,async setLayoutCurrentConfiguration(e){if(e)this.newLayout=!1,e=re(e);else{this.newLayout=!0;let r=await D("ecosystemDefaults.get");const t=r.error?{}:r.results[0];e={name:"",user_code:"",content_type:"reports.performancereport",data:{additions:{},reportOptions:{begin_date:null,end_date:Ee(new Date).format("YYYY-MM-DD"),report_currency:t.currency||null,calculation_type:"time_weighted",segmentation_type:"months",pricing_policy:t.pricing_policy||null},components:{period:!0,detail:!0,diagram:!0},exportOptions:{}}}}return this.components=JSON.parse(JSON.stringify(e.data.components)),this.reportOptions=JSON.parse(JSON.stringify(e.data.reportOptions)),this.additions=JSON.parse(JSON.stringify(e.data.additions)),this.exportOptions=JSON.parse(JSON.stringify(e.data.exportOptions)),this.listLayout=e,new Promise(r=>r())},getLayoutCurrentConfiguration(){let e=re(this.listLayout);return e.data.components={...this.components},e.data.reportOptions=JSON.parse(JSON.stringify(this.reportOptions)),e.data.additions=JSON.parse(JSON.stringify(this.additions)),e.data.exportOptions=JSON.parse(JSON.stringify(this.exportOptions)),e}}),Ut=function(e,r,t,a){const i=t.markedRowFilters||"none",u=r.getEntityType(),$=e.getMemberEntityViewersSettings(a,u);$.row_type_filter=i,e.setMemberEntityViewersSettings($,a,u);const O=e.member;D("member.put",{params:{id:O.id},body:{body:O}})};async function Nt(e,r){const t=r.entityType,a=r.isReport;if(t!=="reports-performance"){const u=r.getRowTypeFilters();u&&Ut(e,r,u,a)}const i=r.getLayoutCurrentConfiguration(a);if(i.hasOwnProperty("id")){const u={id:i.id},$=await D("listLayout.put",{params:u,body:i});$.errorData||(r.listLayout=$,_e({type:"success",title:"Success. Page was saved."}))}}const ue=e=>(Ve("data-v-23df5f44"),e=e(),$e(),e),Jt={class:"fm_list"},Et=ue(()=>d("div",{class:"fm_list_item"}," Add Portfolio register ",-1)),jt={class:"flex sb"},zt=ne("cancel"),qt=ne("create"),Wt={class:"fm_container"},Ht={class:"table_wrap flex"},Gt={class:"coll_years"},Qt=ue(()=>d("div",{class:"coll_item t_header"},"Years",-1)),Kt={class:"coll_months"},Xt={class:"coll_total"},Zt=ue(()=>d("div",{class:"coll_item t_header"},"TOTAL",-1)),en=ue(()=>d("div",{style:{height:"350px"}},[d("canvas",{id:"myChart"},[d("p",null,"Chart")])],-1)),tn={__name:"performance",setup(e){const r=je(),t=Rt();let a=h(!1),i=h(!1),u=h({registers:[]}),$=h([]);D("portfolioRegister.post",{body:'{"groups_types":[],"page":1,"groups_values":[],"groups_order":"asc","page_size":60,"ev_options":{"entity_filters":["enabled","disabled","active","inactive"]},"filter_settings":[],"global_table_search":"","is_enabled":"any"}'}).then(s=>{s.results.forEach(n=>{$.value.push({user_code:n.user_code,id:n.id})})});let O=h([]);g();async function g(){const s=await D("currenciesLight.get");s.error||(O.value=s.results)}async function M(){await D("portfolioBundles.post",{body:u.value})&&(u.value={registers:[]},ae(),_e({type:"success",title:"Bundle created successfully"}))}h(["period","detail","diagram"]);let x=h([]),F=h(["","Daily","MTD","QTD","YTD",+k().year()-1,+k().year()-2,"Incept"]),v=h([]),w=h(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),C=h([]),_=h([]),f=h([]),K=h([]),T=h(""),P=h(""),I,X=h(0),J=h(0),E=h(!1);async function oe(){if(t.newLayout){const s=t.getLayoutCurrentConfiguration();s.name="default",s.user_code="default",s.is_default=!0;let n=await D("listLayout.post",{body:s});n.error||(t.newLayout=!1,t.listLayout=n,_e({type:"success",title:"Success. Page was saved."}))}else Nt(r,t)}async function de(s){X.value=s,T.value=v.value[s].name,await ye(v.value[s].name),P.value=f.value[0],ce(C.value[0],_.value[0])}async function S(s){J.value=s,P.value=f.value[s],ce(C.value[s],_.value[s])}async function Me(){const s=await D("defaultListLayout.get",{params:{contentType:t.contentType}});if(s.error)throw new Error("Failed to fetch default performance layout");{const n=s.results.length?s.results[0]:null;t.setLayoutCurrentConfiguration(n).then(()=>{E.value=!0})}}async function Le(){await Me(),await ae(),I=new ze("myChart",{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Monthly Returns",data:C.value[0],backgroundColor:C.value[0].map(s=>s>0?"#a5d9c9":"#fac878"),order:1},{label:"Cummulative Return",data:_.value[0],fill:"#f05a23",type:"line",borderColor:"#f05a23",tension:.1,order:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",reverse:!0}},scales:{y:{grace:"5%",ticks:{callback:function(s,n,c){return s+"%"}}}}}})}async function ae(){if(await Ye(),!x.value.length)return!1;X.value=0,J.value=0,T.value=x.value[0].user_code,await ye(),P.value=f.value[0],I&&ce(C.value[0],_.value[0])}async function Ye(){let s=await D("portfolioBundles.get");x.value=s.results,v.value=[],x.value.forEach(n=>{v.value.push({name:n.user_code});let c=v.value[v.value.length-1];c.daily=null,xe(n.id).then(m=>{c.daily=Math.round(m*100*100)/100+"%"}),c.month=null,Fe(n.id).then(m=>{c.month=Math.round(m*100*100)/100+"%"}),c.q=null,Te(n.id).then(m=>{c.q=Math.round(m*100*100)/100+"%"}),c.year=null,Ie(n.id).then(m=>{c.year=Math.round(m*100*100)/100+"%"}),c.last=null,Be(n.id).then(m=>{c.last=Math.round(m*100*100)/100+"%"}),c.beforeLast=null,Pe(n.id).then(m=>{c.beforeLast=Math.round(m*100*100)/100+"%"}),c.incept=null,Ae(n.id).then(m=>{c.incept=Math.round(m*100*100)/100+"%"})})}async function ye(s){var le,se,Z;f.value=[],K.value=[],C.value=[],_.value=[];let n=s?x.value.find(L=>L.name==s).id:x.value[0].id,c=await D("performanceFirstTransaction.get",{params:{id:n}}),m=k((le=t.reportOptions)==null?void 0:le.end_date).add(-1,"d").format("YYYY-MM-DD"),j=await D("performanceReport.post",{body:{save_report:!1,begin_date:c.transaction_date,end_date:m,calculation_type:"time_weighted",segmentation_type:"months",report_currency:(se=t.reportOptions)==null?void 0:se.report_currency,bundle:n}}),B=new Map;j.items.reverse().forEach(L=>{let A=L.date_to.split("-"),G={key_01:[0,0],key_02:[0,0],key_03:[0,0],key_04:[0,0],key_05:[0,0],key_06:[0,0],key_07:[0,0],key_08:[0,0],key_09:[0,0],key_10:[0,0],key_11:[0,0],key_12:[0,0]};B.has(A[0])||B.set(A[0],G),B.get(A[0])["key_"+A[1]]=[Math.round(L.instrument_return*1e4)/100,Math.round(L.cumulative_return*1e4)/100]});let H=k((Z=t.reportOptions)==null?void 0:Z.end_date);for(let[L,A]of B){f.value.push(L),C.value.push(Object.values(A).map((z,p)=>L!=H.year()||p<=H.month()?z[0]:"")),_.value.push(Object.values(A).map((z,p)=>{if(L!=H.year()||p<=H.month())return z[1]}));let G=await N({start:`${L-1}-12-31`,end:`${L}-12-31`,ids:n});K.value.push(G*100)}}function ce(s,n){I.data.datasets[0].data=s,I.data.datasets[0].backgroundColor=s.map(c=>c>0?"#a5d9c9":"#fac878"),I.data.datasets[1].data=n,I.update()}async function xe(s){var c;let n=k((c=t.reportOptions)==null?void 0:c.end_date).add(-1,"d").format("YYYY-MM-DD");return await N({start:n,end:n,ids:s,type:"days"})}async function Fe(s){var m;let n=k((m=t.reportOptions)==null?void 0:m.end_date).add(-1,"d").format("YYYY-MM-DD"),c=k().set("date",1).add(-1,"d").format("YYYY-MM-DD");return await N({start:c,end:n,ids:s})}async function Te(s){var m;let n=k().quarter(k().quarter()).set("date",1).add(-1,"d").format("YYYY-MM-DD"),c=k((m=t.reportOptions)==null?void 0:m.end_date).add(-1,"d").format("YYYY-MM-DD");return await N({start:n,end:c,ids:s})}async function Ie(s){var m;let n=k().set({date:1,month:1}).add(-1,"d").format("YYYY-MM-DD"),c=k((m=t.reportOptions)==null?void 0:m.end_date).add(-1,"d").format("YYYY-MM-DD");return await N({start:n,end:c,ids:s})}async function Be(s){var m;let n=`${k().year()-2}-12-31`,c=`${k((m=t.reportOptions)==null?void 0:m.end_date).year()-1}-12-30`;return await N({start:n,end:c,ids:s})}async function Pe(s){var m;let n=`${k().year()-3}-12-31`,c=`${k((m=t.reportOptions)==null?void 0:m.end_date).year()-2}-12-30`;return await N({start:n,end:c,ids:s})}async function Ae(s){var j;let c=(await D("performanceFirstTransaction.get",{params:{id:s}})).transaction_date,m=k((j=t.reportOptions)==null?void 0:j.end_date).add(-1,"d").format("YYYY-MM-DD");return await N({start:c,end:m,ids:s})}async function N({start:s,end:n,ids:c,type:m="months"}){var B;return(await D("performanceReport.post",{body:{save_report:!1,begin_date:s,end_date:n,calculation_type:"time_weighted",segmentation_type:m,report_currency:(B=t.reportOptions)==null?void 0:B.report_currency,bundle:c}})).grand_return}return Le(),(s,n)=>{const c=it,m=Se,j=ut,B=Q,H=Ce,le=mt,se=Mt,Z=be,L=he,A=ke,G=Tt,z=At;return b(),V("div",null,[l(c,{modelValue:o(a),"onUpdate:modelValue":n[0]||(n[0]=p=>Y(a)?a.value=p:a=p),"layout-ready-status":o(E),"onUpdate:layout-ready-status":n[1]||(n[1]=p=>Y(E)?E.value=p:E=p),"viewer-data":o(t),bundles:o(x),onSave:n[2]||(n[2]=p=>(Y(a)?a.value=!1:a=!1,[o(t).reportOptions,o(t).components]=p,ae())),onCancel:n[3]||(n[3]=p=>Y(a)?a.value=!1:a=!1)},null,8,["modelValue","layout-ready-status","viewer-data","bundles"]),l(j,{height:"50",onSaveListLayout:n[5]||(n[5]=p=>oe()),onOpenSettings:n[6]||(n[6]=p=>{Y(a)?a.value=!0:a=!0})},{rightActions:y(()=>[l(m,{no_borders:"",class:"m-b-0",modelValue:o(t).reportOptions.report_currency,"onUpdate:modelValue":n[4]||(n[4]=p=>o(t).reportOptions.report_currency=p),items:o(O),prop_name:"short_name"},null,8,["modelValue","items"])]),_:1}),l(A,{height:"50"},{leftActions:y(()=>[l(H,null,{btn:y(()=>[l(B,{btnPrimary:"",icon:"add"})]),default:y(()=>[d("div",Jt,[Et,d("div",{class:"fm_list_item",onClick:n[7]||(n[7]=p=>Y(i)?i.value=!0:i=!0)}," Add bundle ")])]),_:1}),l(L,{title:"Add Bundle",modelValue:o(i),"onUpdate:modelValue":n[15]||(n[15]=p=>Y(i)?i.value=p:i=p),onCancel:n[16]||(n[16]=p=>Y(i)?i.value=!1:i=!1)},{controls:y(()=>[d("div",jt,[l(Z,{type:"text",onClick:n[13]||(n[13]=p=>Y(i)?i.value=!1:i=!1)},{default:y(()=>[zt]),_:1}),l(Z,{onClick:n[14]||(n[14]=p=>(M(),Y(i)?i.value=!1:i=!1))},{default:y(()=>[qt]),_:1})])]),default:y(()=>[l(le,{label:"Bundle name",name:o(u).name,"onUpdate:name":n[8]||(n[8]=p=>o(u).name=p),short_name:o(u).short_name,"onUpdate:short_name":n[9]||(n[9]=p=>o(u).short_name=p),user_code:o(u).user_code,"onUpdate:user_code":n[10]||(n[10]=p=>o(u).user_code=p),public_name:o(u).public_name,"onUpdate:public_name":n[11]||(n[11]=p=>o(u).public_name=p)},null,8,["name","short_name","user_code","public_name"]),l(se,{class:"p-b-16",modelValue:o(u).registers,"onUpdate:modelValue":n[12]||(n[12]=p=>o(u).registers=p),items:o($)},null,8,["modelValue","items"])]),_:1},8,["modelValue"])]),rightActions:y(()=>[l(B,{icon:"refresh",onClick:n[17]||(n[17]=p=>ae()),btn:""})]),_:1}),d("div",Wt,[l(z,{title:"Period Returns"},{default:y(()=>[l(G,{headers:o(F),items:o(v),active:o(X),colls:"repeat(8, 1fr)",cb:de},null,8,["headers","items","active"])]),_:1}),l(z,{title:o(T)},{default:y(()=>[d("div",Ht,[d("div",Gt,[Qt,(b(!0),V(R,null,q(o(f),(p,pe)=>(b(),V("div",{class:"coll_item",key:pe},U(p),1))),128))]),d("div",Kt,[l(G,{headers:o(w),items:o(C),colls:"repeat(12, 1fr)",cb:S,active:o(J)},null,8,["headers","items","active"])]),d("div",Xt,[Zt,(b(!0),V(R,null,q(o(K),(p,pe)=>(b(),V("div",{class:"coll_item",key:pe},U(Math.round(p*100)/100)+"% ",1))),128))])])]),_:1},8,["title"]),l(z,{title:o(T)+" - "+o(P)},{default:y(()=>[en]),_:1},8,["title"])])])}}},_n=W(tn,[["__scopeId","data-v-23df5f44"]]);export{_n as default};
