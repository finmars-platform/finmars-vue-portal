<div data-ng-controller="ReportViewerController as vm" class="report-viewer-holder height-100">
    <div data-ng-if="vm.readyStatus.attributes && vm.readyStatus.layout" class="g-group-table-holder height-100">

        <div data-ng-if="!vm.possibleToRequestReport">

            <h1 class="text-center">Warning</h1>
            <p class="text-center">

                We've noticed that you've opened <b>{{vm.openGroupsCount}}</b> groups since your last session. This
                might result in slower loading times. Do you wish to continue?

            </p>

            <div layout="row" layout-align="center center"
                     data-ng-click="vm.closeGroupsAndContinueReportGeneration($event)">
                <md-button class="outline-button">
                    <md-tooltip class="tooltip_2"
                                            md-direction="bottom">
                        Close all previously opened groups. All other settings will remain
                    </md-tooltip>
                    Start New
                </md-button>
                <md-button class="outline-button" data-ng-click="vm.continueReportGeneration($event)">
                    <md-tooltip class="tooltip_2"
                                            md-direction="bottom">
                        Loading Report could take time.
                    </md-tooltip>
                    Restore Session
                </md-button>
            </div>

        </div>

        <div data-ng-if="vm.possibleToRequestReport" class="height-100 display-block">


            <group-table class="height-100 display-block"
                                     attribute-data-service="vm.attributeDataService"
                                     ev-data-service="vm.entityViewerDataService"
                                     ev-event-service="vm.entityViewerEventService"
                                     sp-exchange-service="vm.splitPanelExchangeService"
            ></group-table>
        </div>
    </div>
    <div data-ng-if="!vm.readyStatus.attributes || !vm.readyStatus.layout">
        <div class="e-data-loader" layout="row" layout-sm="column" layout-align="center center">
            <!--<md-progress-circular md-diameter="100" md-mode="indeterminate"></md-progress-circular>-->
            <progress-circular diameter="100"></progress-circular>
        </div>
    </div>
</div>
